<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoviTube - Watchlist</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        :root {
            --primary-dark: #273043;
            --primary-purple: #9197AE;
            --light-green: #EFF6EE;
            --accent-red: #F02D3A;
            --dark-red: #DD0426;
        }
        body { background-color: var(--primary-dark); color: var(--light-green); }
        /* Better text contrast for dark mode */
        .text-muted { color: var(--primary-purple) !important; }
        .card-title { color: var(--light-green); }
        .card-text { color: var(--primary-purple); }
        .navbar { 
            background-color: var(--primary-dark) !important; 
            padding-top: 0.8rem;
            padding-bottom: 0.8rem;
        }
        .navbar-brand { color: var(--light-green) !important; font-weight: bold; font-size: 1.8rem; }
        .navbar-nav .nav-link { color: var(--light-green) !important; }
        .btn-primary { background-color: var(--accent-red); border-color: var(--dark-red); }
        .btn-primary:hover { background-color: var(--dark-red); }
        .card { border: 1px solid var(--primary-purple); background-color: #1f2633; box-shadow: 0 4px 6px rgba(0,0,0,0.2); }
        .section-title { color: var(--light-green); border-bottom: 2px solid var(--accent-red); padding-bottom: 10px; margin-bottom: 2rem; }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="Homepage.html"><i class="bi bi-film"></i> MoviTube</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link" href="Genres Page.html">Genres</a></li>
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="Watchlist Page.html">Watchlist</a></li>
                    <li class="nav-item"><a class="nav-link" href="Contact Page.html">Contact</a></li>
                    <li class="nav-item"><a class="nav-link" href="About Us Page.html">About Us</a></li>
                </ul>
                <form class="d-flex" action="Search Results Page.html" method="GET">
                    <input class="form-control me-2" type="search" name="query" placeholder="Search Movies...">
                    <button class="btn btn-primary" type="submit"><i class="bi bi-search"></i></button>
                </form>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <h2 class="section-title text-center">Your Watchlist</h2>

        <div class="d-flex justify-content-between align-items-center mb-3">
            <p class="mb-0 text-muted">Movies you saved to watch later. Remove individual items or clear the whole list.</p>
            <div>
                <button id="clearWatchlist" class="btn btn-outline-danger btn-sm">Clear Watchlist</button>
            </div>
        </div>

        <div id="watchlistContainer" class="row">
            <!-- Watchlist items will be rendered here -->
        </div>

        <div id="emptyState" class="text-center mt-5" style="display:none;">
            <i class="bi bi-bookmark-heart" style="font-size:48px;color:var(--accent-red)"></i>
            <h4 class="mt-3" style="color:var(--light-green)">No items in your watchlist</h4>
            <p class="mb-0" style="color:var(--primary-purple)">Browse genres and add movies to your watchlist to see them here.</p>
        </div>
    </div>

    <footer class="py-4 mt-5" style="border-top: 1px solid var(--primary-purple);">
        <div class="container text-center">
            <h5 style="color:var(--light-green)"><i class="bi bi-film"></i> MoviTube</h5>
            <p class="mb-0" style="color:var(--primary-purple)">&copy; 2025 MoviTube. All rights reserved.</p>
        </div>
    </footer>

    <script>
        (function() {
            const STORAGE_KEY = 'moviTubeWatchlist';

            function loadWatchlist() {
                try { const raw = localStorage.getItem(STORAGE_KEY); return raw ? JSON.parse(raw) : []; }
                catch (e) { return []; }
            }

            function saveWatchlist(list) {
                try { localStorage.setItem(STORAGE_KEY, JSON.stringify(list)); }
                catch (e) { console.warn('Could not save watchlist', e); }
            }

            function render() {
                const container = document.getElementById('watchlistContainer');
                const empty = document.getElementById('emptyState');
                container.innerHTML = '';
                const list = loadWatchlist();
                if (!list || list.length === 0) {
                    empty.style.display = '';
                    return;
                }
                empty.style.display = 'none';

                list.forEach(title => {
                    const col = document.createElement('div');
                    col.className = 'col-sm-6 col-md-4 col-lg-3 mb-4';

                    const card = document.createElement('div');
                    card.className = 'card h-100';

                    const img = document.createElement('img');
                    img.className = 'card-img-top';
                    img.src = 'https://via.placeholder.com/300x160/1f2633/EFF6EE?text=' + encodeURIComponent(title);
                    img.alt = title;

                    const body = document.createElement('div');
                    body.className = 'card-body d-flex flex-column';

                    const h5 = document.createElement('h5');
                    h5.className = 'card-title';
                    h5.textContent = title;

                    const meta = document.createElement('p');
                    meta.className = 'card-text small mb-2';
                    meta.textContent = 'Saved to watchlist';

                    const controls = document.createElement('div');
                    controls.className = 'mt-auto';

                    const view = document.createElement('a');
                    view.href = '#';
                    view.className = 'btn btn-primary btn-sm';
                    view.textContent = 'View';

                    const remove = document.createElement('button');
                    remove.className = 'btn btn-outline-danger btn-sm ms-2';
                    remove.textContent = 'Remove';
                    remove.addEventListener('click', (e) => {
                        e.preventDefault();
                        removeItem(title);
                    });

                    controls.appendChild(view);
                    controls.appendChild(remove);

                    body.appendChild(h5);
                    body.appendChild(meta);
                    body.appendChild(controls);

                    card.appendChild(img);
                    card.appendChild(body);
                    col.appendChild(card);
                    container.appendChild(col);
                });
            }

            function removeItem(title) {
                const list = loadWatchlist();
                const idx = list.indexOf(title);
                if (idx >= 0) {
                    list.splice(idx, 1);
                    saveWatchlist(list);
                    render();
                }
            }

            document.getElementById('clearWatchlist').addEventListener('click', (e) => {
                e.preventDefault();
                if (!confirm('Clear all items from your watchlist?')) return;
                saveWatchlist([]);
                render();
            });

            // initial render
            render();
        })();
    </script>
</body>
</html>
